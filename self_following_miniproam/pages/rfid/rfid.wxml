<!-- pages/rfid/rfid.wxml - RFIDå®æ—¶ç›‘æ§é¡µé¢ -->
<view class="container">
  <!-- å®æ—¶çŠ¶æ€é¢æ¿ -->
  <view class="status-panel">
    <view class="panel-header">
      <text class="panel-title">å®æ—¶ç›‘æ§çŠ¶æ€</text>
      <view class="status-indicator {{isScanning ? 'scanning' : 'idle'}}">
        <view class="status-dot"></view>
        <text class="status-text">{{isScanning ? 'è¿è¡Œä¸­' : 'å·²åœæ­¢'}}</text>
      </view>
    </view>
    
    <view class="status-content">
      <view class="status-row">
        <view class="status-item">
          <text class="status-label">è¿æ¥çŠ¶æ€ï¼š</text>
          <text class="status-value {{connected ? 'connected' : 'disconnected'}}">
            {{connected ? 'âœ“ å·²è¿æ¥' : 'âœ— æœªè¿æ¥'}}
          </text>
        </view>
        <view class="status-item">
          <text class="status-label">è¿è¡Œæ—¶é•¿ï¼š</text>
          <text class="status-value">{{runningTime}}</text>
        </view>
      </view>
      
      <view class="status-row">
        <view class="status-item">
          <text class="status-label">è¯»å†™å™¨åœ°å€ï¼š</text>
          <text class="status-value">{{readerAddress}}</text>
        </view>
        <view class="status-item">
          <text class="status-label">è¯»å–é€Ÿç‡ï¼š</text>
          <text class="status-value highlight">{{readRate}} æ¬¡/ç§’</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- æ§åˆ¶æŒ‰é’®åŒº -->
  <view class="control-section">
    <button class="control-btn {{isScanning ? 'stop' : 'start'}}" 
            bindtap="toggleScanning">
      <text class="btn-title">{{isScanning ? 'åœæ­¢ç›˜ç‚¹' : 'å¼€å§‹ç›˜ç‚¹'}}</text>
      <text class="btn-subtitle">{{isScanning ? 'ç‚¹å‡»åœæ­¢å®æ—¶æ‰«æ' : 'ç‚¹å‡»å¼€å§‹å®æ—¶æ‰«æ'}}</text>
    </button>
    
    <button class="control-btn clear" bindtap="clearData">
      <text class="btn-title">æ¸…ç©ºæ•°æ®</text>
      <text class="btn-subtitle">æ¸…é™¤æ‰€æœ‰æ ‡ç­¾è®°å½•</text>
    </button>
  </view>
  
  <!-- å¤©çº¿é€‰æ‹©åŒº -->
  <view class="antenna-section">
    <text class="section-title">å¤©çº¿é…ç½®</text>
    <view class="antenna-selector">
      <view class="antenna-item {{selectedAntenna === 1 ? 'active' : ''}}" 
            bindtap="selectAntenna" data-antenna="1">
        <text>å¤©çº¿ 1</text>
      </view>
      <view class="antenna-item {{selectedAntenna === 2 ? 'active' : ''}}" 
            bindtap="selectAntenna" data-antenna="2">
        <text>å¤©çº¿ 2</text>
      </view>
      <view class="antenna-item {{selectedAntenna === 3 ? 'active' : ''}}" 
            bindtap="selectAntenna" data-antenna="3">
        <text>å¤©çº¿ 3</text>
      </view>
      <view class="antenna-item {{selectedAntenna === 4 ? 'active' : ''}}" 
            bindtap="selectAntenna" data-antenna="4">
        <text>å¤©çº¿ 4</text>
      </view>
    </view>
  </view>
  
  <!-- å®æ—¶æ•°æ®æ˜¾ç¤ºåŒº -->
  <view class="realtime-data">
    <view class="data-header">
      <text class="data-title">å®æ—¶æ•°æ®æµ</text>
      <view class="data-status">
        <view class="live-dot"></view>
        <text>å®æ—¶æ›´æ–°</text>
      </view>
    </view>
    
    <view class="data-grid">
      <view class="data-card">
        <text class="card-value">{{totalTags}}</text>
        <text class="card-label">æ£€æµ‹æ ‡ç­¾</text>
        <text class="card-hint">{{newTagsCount > 0 ? '+' + newTagsCount + ' æ–°å¢' : ''}}</text>
      </view>
      
      <view class="data-card">
        <text class="card-value">{{totalReads}}</text>
        <text class="card-label">æ€»è¯»å–æ¬¡æ•°</text>
        <text class="card-hint">{{avgReadsPerTag}} æ¬¡/æ ‡ç­¾</text>
      </view>
      
      <view class="data-card">
        <text class="card-value">{{avgRSSI}}</text>
        <text class="card-label">å¹³å‡RSSI</text>
        <text class="card-hint">dBm</text>
      </view>
    </view>
  </view>
  
  <!-- æ ‡ç­¾åˆ—è¡¨ -->
  <view class="tag-list-section">
    <view class="list-header">
      <text class="list-title">æ ‡ç­¾åˆ—è¡¨</text>
      <text class="list-count">{{tagList.length}} ä¸ªæ ‡ç­¾</text>
    </view>
    
    <scroll-view class="tag-list" scroll-y>
      <view class="tag-item" wx:for="{{tagList}}" wx:key="epc">
        <view class="tag-indicator"></view>
        <view class="tag-content">
          <text class="tag-epc">{{item.epc}}</text>
          <view class="tag-info">
            <text class="info-item">RSSI: {{item.rssi}}dBm</text>
            <text class="info-separator">|</text>
            <text class="info-item">è¯»å–: {{item.readCount}}æ¬¡</text>
            <text class="info-separator">|</text>
            <text class="info-item">å¤©çº¿: {{item.antenna}}</text>
          </view>
        </view>
        <view class="tag-meta">
          <text class="tag-time">{{item.lastSeen}}</text>
          <text class="tag-status {{item.isActive ? 'active' : 'inactive'}}">
            {{item.isActive ? 'æ´»è·ƒ' : 'é™é»˜'}}
          </text>
        </view>
      </view>
      
      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-state" wx:if="{{tagList.length === 0}}">
        <text class="empty-icon">ğŸ“¡</text>
        <text class="empty-title">æš‚æ— æ ‡ç­¾æ•°æ®</text>
        <text class="empty-desc">ç‚¹å‡»"å¼€å§‹ç›˜ç‚¹"æŒ‰é’®å¼€å§‹æ‰«æRFIDæ ‡ç­¾</text>
      </view>
    </scroll-view>
  </view>
  
  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <button class="bottom-btn" bindtap="exportData">
      <text class="btn-icon">ğŸ“¤</text>
      <text>å¯¼å‡ºæ•°æ®</text>
    </button>
    <button class="bottom-btn" bindtap="viewHistory">
      <text class="btn-icon">ğŸ“Š</text>
      <text>å†å²è®°å½•</text>
    </button>
    <button class="bottom-btn" bindtap="openSettings">
      <text class="btn-icon">âš™ï¸</text>
      <text>é«˜çº§è®¾ç½®</text>
    </button>
  </view>
</view>